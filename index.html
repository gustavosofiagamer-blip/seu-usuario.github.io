<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Pega-Pega das Bolinhas</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: #111;
  }
  canvas {
    display: block;
  }
</style>
</head>
<body>
<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize();
addEventListener("resize", resize);

// ===== CONFIG =====
const TOTAL = 5;
const RAIO = 12;

// ===== BOLINHAS =====
let bolinhas = [];

// cria bolinhas
for (let i = 0; i < TOTAL; i++) {
  bolinhas.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    vx: (Math.random() - 0.5) * 4,
    vy: (Math.random() - 0.5) * 4,
    pegadora: false
  });
}

// escolhe a pegadora
bolinhas[Math.floor(Math.random() * bolinhas.length)].pegadora = true;

// ===== LOOP =====
function loop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  if (bolinhas.length <= 1) {
    ctx.fillStyle = "white";
    ctx.font = "30px Arial";
    ctx.textAlign = "center";
    ctx.fillText("Fim do jogo", canvas.width / 2, canvas.height / 2);
    return;
  }

  bolinhas.forEach((b, i) => {
    // movimento
    b.x += b.vx;
    b.y += b.vy;

    // quicar na parede
    if (b.x < RAIO || b.x > canvas.width - RAIO) b.vx *= -1;
    if (b.y < RAIO || b.y > canvas.height - RAIO) b.vy *= -1;

    // se for pegadora, persegue
    if (b.pegadora) {
      let alvo = bolinhas.find(o => !o.pegadora);
      if (alvo) {
        let ang = Math.atan2(alvo.y - b.y, alvo.x - b.x);
        b.vx = Math.cos(ang) * 3;
        b.vy = Math.sin(ang) * 3;
      }
    } 
    // fugitivas fogem
    else {
      let pegadora = bolinhas.find(o => o.pegadora);
      let ang = Math.atan2(b.y - pegadora.y, b.x - pegadora.x);
      b.vx = Math.cos(ang) * 2;
      b.vy = Math.sin(ang) * 2;
    }

    // desenhar
    ctx.beginPath();
    ctx.arc(b.x, b.y, RAIO, 0, Math.PI * 2);
    ctx.fillStyle = b.pegadora ? "red" : "white";
    ctx.fill();
  });

  // colisÃµes
  for (let i = bolinhas.length - 1; i >= 0; i--) {
    for (let j = bolinhas.length - 1; j >= 0; j--) {
      if (i !== j) {
        let a = bolinhas[i];
        let b = bolinhas[j];
        let d = Math.hypot(a.x - b.x, a.y - b.y);
        if (d < RAIO * 2) {
          if (a.pegadora && !b.pegadora) {
            bolinhas.splice(j, 1);
          }
        }
      }
    }
  }

  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
